import{k as u,a as w,u as S,r as d,j as e,L as A}from"./index-BWRs-o60.js";import{A as U}from"./AuroraSelect-thE5CfqJ.js";import"./utils-CKXzwFwe.js";import"./clsx-B-dksMZM.js";const x={async listSecurityUsers(s){const c=new URLSearchParams;return s&&s!=="all"&&c.set("status",s),(await u.get(`/admin/security-users?${c.toString()}`)).data.users},async approveSecurityUser(s){return(await u.patch(`/admin/security-users/${s}/approve`)).data.user},async deleteSecurityUser(s){await u.delete(`/admin/security-users/${s}`)}};function E(){const{user:s,logout:c}=w(),p=S(),[n,y]=d.useState("pending"),[m,h]=d.useState([]),[v,b]=d.useState(!0),[g,i]=d.useState(""),f=d.useMemo(()=>n==="pending"?"Pending Security Users":n==="approved"?"Approved Security Users":"All Security Users",[n]),l=d.useCallback(async(t=n)=>{var a,o;b(!0),i("");try{const r=await x.listSecurityUsers(t);h(r)}catch(r){i(((o=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:o.error)||(r==null?void 0:r.message)||"Failed to load security users")}finally{b(!1)}},[n]);d.useEffect(()=>{if((s==null?void 0:s.role)!=="admin"){p("/");return}l("pending")},[l,p,s==null?void 0:s.role]);const j=async t=>{var a,o;i("");try{await x.approveSecurityUser(t),await l()}catch(r){i(((o=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:o.error)||(r==null?void 0:r.message)||"Failed to approve user")}},N=async t=>{var a,o;i("");try{await x.deleteSecurityUser(t),await l()}catch(r){i(((o=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:o.error)||(r==null?void 0:r.message)||"Failed to delete user")}};return e.jsxs("div",{className:"min-h-screen bg-black p-6 relative",children:[e.jsx("div",{className:"aurora-bg"}),e.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[e.jsxs("div",{className:"glass-panel border-b border-border/50 px-6 py-4 flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold aurora-text",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome, ",(s==null?void 0:s.name)||(s==null?void 0:s.email)]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(A,{to:"/",className:"px-4 py-2 bg-secondary/60 hover:bg-secondary/80 text-foreground rounded-lg transition-colors border border-border/50",children:"Home"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-secondary/60 hover:bg-secondary/80 text-foreground rounded-lg transition-colors border border-border/50",children:"Logout"})]})]}),e.jsxs("div",{className:"glass-panel p-6 border border-border/60",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pb-3 mb-4 border-b border-border/40",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:f}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Approve or reject security accounts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{value:n,onChange:t=>{const a=t;y(a),l(a)},options:[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"all",label:"All"}],buttonClassName:"w-40 px-4 py-2 bg-card/50 border border-border rounded-lg backdrop-blur-sm hover:bg-card/60 focus:ring-primary/50"}),e.jsx("button",{type:"button",onClick:()=>l(),className:"px-4 py-2 bg-secondary/60 hover:bg-secondary/80 text-foreground rounded-lg transition-colors border border-border/50",children:"Refresh"})]})]}),g?e.jsx("div",{className:"mb-4 bg-destructive/20 border border-destructive/40 text-destructive-foreground px-4 py-3 rounded",children:g}):null,v?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):m.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No users found"}):e.jsx("div",{className:"space-y-3",children:m.map(t=>e.jsx("div",{className:"bg-black/40 rounded-lg p-4 border border-border/60 shadow-[0_10px_30px_rgba(0,0,0,0.35)]",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-foreground font-semibold",children:t.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.email}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(t.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.security_approved?e.jsx("span",{className:"px-3 py-1 rounded text-xs font-semibold bg-safe/20 text-safe border border-safe/30",children:"APPROVED"}):e.jsx("span",{className:"px-3 py-1 rounded text-xs font-semibold bg-warning/20 text-warning border border-warning/30",children:"PENDING"}),t.security_approved?null:e.jsx("button",{type:"button",onClick:()=>j(t.id),className:"px-4 py-2 bg-primary/80 hover:bg-primary text-primary-foreground rounded-lg border border-primary/30",children:"Approve"}),e.jsx("button",{type:"button",onClick:()=>N(t.id),className:"px-4 py-2 bg-danger/80 hover:bg-danger text-white rounded-lg border border-danger/30",children:"Delete"})]})]})},t.id))})]})]})]})}export{E as default};
